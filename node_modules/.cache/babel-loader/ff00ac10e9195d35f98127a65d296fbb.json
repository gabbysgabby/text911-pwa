{"ast":null,"code":"import _classCallCheck from \"/Users/Gabby/feand-neighborhood-map-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Gabby/feand-neighborhood-map-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Gabby/feand-neighborhood-map-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Gabby/feand-neighborhood-map-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Gabby/feand-neighborhood-map-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Gabby/feand-neighborhood-map-react/src/components/App/App.js\";\nimport React, { Component } from 'react';\nimport escapeRegExp from 'escape-string-regexp';\nimport sortBy from 'sort-by';\nimport { MAP_API_KEY } from '../../utils/apiKeys';\nimport { getAll } from '../../utils/FoursquareAPI';\nimport Top from '../Top/Top';\n{\n  /*import Filter from '../Filter/Filter';*/\n}\nimport Map from '../Map/Map';\nimport Footer from '../Footer/Footer';\nimport Error from '../Error/Error';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      places: [],\n      showingPlaces: [],\n      query: '',\n      center: {\n        lat: -15.8535404,\n        lng: -48.9699847\n      },\n      showInfoId: '',\n      loaded: false,\n      action: false,\n      mapError: false,\n      markerAnimation: 2\n    };\n\n    _this.onToggleOpen = function (id, action) {\n      _this.setState({\n        showInfoId: id,\n        action: action,\n        markerAnimation: action ? 1 : null\n      });\n    };\n\n    _this.filterPlaces = function (query) {\n      var places = _this.state.places;\n      var showingPlaces; // update query in state\n\n      _this.setState({\n        query: query.trim()\n      }); // filter places to show based on query\n\n\n      if (query) {\n        var match = new RegExp(escapeRegExp(query), 'i');\n        showingPlaces = places.filter(function (place) {\n          return match.test(place.name);\n        });\n      } else {\n        showingPlaces = places;\n      } // sort places to show by place name\n\n\n      showingPlaces.sort(sortBy('name')); // update places to show in state\n\n      _this.setState({\n        showingPlaces: showingPlaces\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n\n    /**\n     * @description Load initial data\n     */\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getAll().then(function (res) {\n        _this2.setState({\n          places: res,\n          showingPlaces: res,\n          loaded: true\n        });\n      });\n\n      window.gm_authFailure = function () {\n        _this2.setState({\n          mapError: true\n        });\n      };\n    }\n    /**\n     * @description Toggle maker's infowindow open\n     * @param {string} id - The marker's place ID\n     * @param {string} action - Type of action fired (open or close)\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          mapError = _this$state.mapError,\n          loaded = _this$state.loaded;\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Top, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, loaded && React.createElement(Filter, {\n        data: this.state,\n        onToggleOpen: this.onToggleOpen,\n        filterPlaces: this.filterPlaces,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), loaded && !mapError && React.createElement(Map, {\n        onToggleOpen: this.onToggleOpen,\n        showInfoId: this.state.showInfoId,\n        action: this.state.action,\n        places: this.state.places,\n        showingPlaces: this.state.showingPlaces,\n        markerAnimation: this.state.markerAnimation,\n        containerElement: React.createElement(\"main\", {\n          className: \"map\",\n          role: \"application\",\n          tabIndex: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }),\n        mapElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }),\n        loadingElement: React.createElement(Error, {\n          message: 'There was an error while loading the Google Maps scripts. Please try again later.',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }),\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\".concat(MAP_API_KEY, \"&v=3\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), mapError && React.createElement(Error, {\n        size: \"small\",\n        message: 'There was an error while loading the Google Maps scripts. Please try again later.',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/Gabby/feand-neighborhood-map-react/src/components/App/App.js"],"names":["React","Component","escapeRegExp","sortBy","MAP_API_KEY","getAll","Top","Map","Footer","Error","App","state","places","showingPlaces","query","center","lat","lng","showInfoId","loaded","action","mapError","markerAnimation","onToggleOpen","id","setState","filterPlaces","trim","match","RegExp","filter","place","test","name","sort","then","res","window","gm_authFailure","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport escapeRegExp from 'escape-string-regexp';\nimport sortBy from 'sort-by';\nimport { MAP_API_KEY } from '../../utils/apiKeys';\nimport { getAll } from '../../utils/FoursquareAPI';\nimport Top from '../Top/Top';\n{/*import Filter from '../Filter/Filter';*/}\nimport Map from '../Map/Map';\nimport Footer from '../Footer/Footer';\nimport Error from '../Error/Error';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    places: [],\n    showingPlaces: [],\n    query: '',\n    center: { lat: -15.8535404, lng: -48.9699847 },\n    showInfoId: '',\n    loaded: false,\n    action: false,\n    mapError: false,\n    markerAnimation: 2\n  };\n\n  /**\n   * @description Load initial data\n   */\n  componentDidMount() {\n    getAll().then(res => {\n      this.setState({\n        places: res,\n        showingPlaces: res,\n        loaded: true\n      });\n    });\n\n    window.gm_authFailure = () => {\n      this.setState({ mapError: true });\n    };\n  }\n\n  /**\n   * @description Toggle maker's infowindow open\n   * @param {string} id - The marker's place ID\n   * @param {string} action - Type of action fired (open or close)\n   */\n  onToggleOpen = (id, action) => {\n    this.setState({\n      showInfoId: id,\n      action,\n      markerAnimation: action ? 1 : null\n    });\n  };\n\n  /**\n   * @description Filter places to show\n   * @param {string} query - The search query\n   */\n  filterPlaces = query => {\n    const { places } = this.state;\n    let showingPlaces;\n\n    // update query in state\n    this.setState({\n      query: query.trim()\n    });\n\n    // filter places to show based on query\n    if (query) {\n      const match = new RegExp(escapeRegExp(query), 'i');\n      showingPlaces = places.filter(place => match.test(place.name));\n    } else {\n      showingPlaces = places;\n    }\n\n    // sort places to show by place name\n    showingPlaces.sort(sortBy('name'));\n\n    // update places to show in state\n    this.setState({ showingPlaces });\n  };\n\n  render() {\n    const { mapError, loaded } = this.state;\n    return (\n      <div className=\"app\">\n        <Top />\n        <div className=\"content\">\n          {loaded && (\n            <Filter\n              data={this.state}\n              onToggleOpen={this.onToggleOpen}\n              filterPlaces={this.filterPlaces}\n            />\n          )}\n          {loaded && !mapError && (\n            <Map\n              onToggleOpen={this.onToggleOpen}\n              showInfoId={this.state.showInfoId}\n              action={this.state.action}\n              places={this.state.places}\n              showingPlaces={this.state.showingPlaces}\n              markerAnimation={this.state.markerAnimation}\n              containerElement={\n                <main className=\"map\" role=\"application\" tabIndex=\"0\" />\n              }\n              mapElement={<div style={{ height: `100%` }} />}\n              loadingElement={\n                <Error\n                  message={\n                    'There was an error while loading the Google Maps scripts. Please try again later.'\n                  }\n                />\n              }\n              googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${MAP_API_KEY}&v=3`}\n            />\n          )}\n          {mapError && (\n            <Error\n              size=\"small\"\n              message={\n                'There was an error while loading the Google Maps scripts. Please try again later.'\n              }\n            />\n          )}\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}