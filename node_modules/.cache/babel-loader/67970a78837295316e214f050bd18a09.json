{"ast":null,"code":"import _classCallCheck from \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/src/components/App/App.js\";\nimport React, { Component } from 'react';\nimport escapeRegExp from 'escape-string-regexp';\nimport sortBy from 'sort-by';\nimport { MAP_API_KEY } from '../../utils/apiKeys';\nimport { getAll } from '../../utils/FoursquareAPI';\nimport Top from '../Top/Top';\nimport Filter from '../Filter/Filter';\nimport Map from '../Map/Map';\nimport Footer from '../Footer/Footer';\nimport Error from '../Error/Error';\nimport Modal from '../Common/Modal';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      places: [],\n      showingPlaces: [],\n      query: '',\n      center: {\n        lat: 37.8006568,\n        lng: -122.4516305\n      },\n      showInfoId: '',\n      loaded: false,\n      action: false,\n      mapError: false,\n      markerAnimation: 2,\n      modal: false\n    };\n\n    _this.onToggleOpen = function (id, action) {\n      _this.setState({\n        showInfoId: id,\n        action: action,\n        markerAnimation: action ? 1 : null\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n\n    /**\n     * @description Load initial data\n     */\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getAll().then(function (res) {\n        _this2.setState({\n          places: res,\n          showingPlaces: res,\n          loaded: true\n        });\n      });\n\n      window.gm_authFailure = function () {\n        _this2.setState({\n          mapError: true\n        });\n      };\n    }\n    /**\n     * @description Toggle maker's infowindow open\n     * @param {string} id - The marker's place ID\n     * @param {string} action - Type of action fired (open or close)\n     */\n\n  }, {\n    key: \"maybeModal\",\n    value: function maybeModal() {\n      if (modal) {\n        return React.createElement(Modal, {\n          header: \"By using this service\",\n          para: \"you agree to our terms of use and allow us to access your location.\",\n          btnTxt: \"Agree\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          mapError = _this$state.mapError,\n          loaded = _this$state.loaded;\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Top, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), maybeModal(), React.createElement(\"div\", {\n        className: \"content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, loaded && !mapError && React.createElement(Map, {\n        onToggleOpen: this.onToggleOpen,\n        showInfoId: this.state.showInfoId,\n        action: this.state.action,\n        places: this.state.places,\n        showingPlaces: this.state.showingPlaces,\n        markerAnimation: this.state.markerAnimation,\n        containerElement: React.createElement(\"main\", {\n          className: \"map\",\n          role: \"application\",\n          tabIndex: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }),\n        mapElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }),\n        loadingElement: React.createElement(Error, {\n          message: 'There was an error while loading the Google Maps scripts. Please try again later.',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }),\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=\".concat(MAP_API_KEY, \"&v=3\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), mapError && React.createElement(Error, {\n        size: \"small\",\n        message: 'There was an error while loading the Google Maps scripts. Please try again later.',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }), loaded && React.createElement(Filter, {\n        data: this.state,\n        onToggleOpen: this.onToggleOpen,\n        filterPlaces: this.filterPlaces,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/sarahpeterson/Desktop/MyStuff/text-911/text911-pwa/src/components/App/App.js"],"names":["React","Component","escapeRegExp","sortBy","MAP_API_KEY","getAll","Top","Filter","Map","Footer","Error","Modal","App","state","places","showingPlaces","query","center","lat","lng","showInfoId","loaded","action","mapError","markerAnimation","modal","onToggleOpen","id","setState","then","res","window","gm_authFailure","maybeModal","height","filterPlaces"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport escapeRegExp from 'escape-string-regexp';\nimport sortBy from 'sort-by';\nimport { MAP_API_KEY } from '../../utils/apiKeys';\nimport { getAll } from '../../utils/FoursquareAPI';\nimport Top from '../Top/Top';\nimport Filter from '../Filter/Filter';\nimport Map from '../Map/Map';\nimport Footer from '../Footer/Footer';\nimport Error from '../Error/Error';\nimport Modal from '../Common/Modal';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    places: [],\n    showingPlaces: [],\n    query: '',\n    center: { lat: 37.8006568, lng: -122.4516305 },\n    showInfoId: '',\n    loaded: false,\n    action: false,\n    mapError: false,\n    markerAnimation: 2,\n    modal: false\n  };\n\n  /**\n   * @description Load initial data\n   */\n  componentDidMount() {\n    getAll().then(res => {\n      this.setState({\n        places: res,\n        showingPlaces: res,\n        loaded: true\n      });\n    });\n\n    window.gm_authFailure = () => {\n      this.setState({ mapError: true });\n    };\n  }\n\n  /**\n   * @description Toggle maker's infowindow open\n   * @param {string} id - The marker's place ID\n   * @param {string} action - Type of action fired (open or close)\n   */\n  onToggleOpen = (id, action) => {\n    this.setState({\n      showInfoId: id,\n      action,\n      markerAnimation: action ? 1 : null\n    });\n  };\n\n  maybeModal() {\n    if (modal) {\n      return (\n        <Modal\n          header=\"By using this service\"\n          para=\"you agree to our terms of use and allow us to access your location.\"\n          btnTxt=\"Agree\"\n        />\n      );\n    }\n  }\n\n\n  render() {\n    const { mapError, loaded } = this.state;\n    return (\n      <div className=\"app\">\n        <Top />\n        {maybeModal()}\n        <div className=\"content\">\n          {loaded && !mapError && (\n            <Map\n              onToggleOpen={this.onToggleOpen}\n              showInfoId={this.state.showInfoId}\n              action={this.state.action}\n              places={this.state.places}\n              showingPlaces={this.state.showingPlaces}\n              markerAnimation={this.state.markerAnimation}\n              containerElement={\n                <main className=\"map\" role=\"application\" tabIndex=\"0\" />\n              }\n              mapElement={<div style={{ height: `100%` }} />}\n              loadingElement={\n                <Error\n                  message={\n                    'There was an error while loading the Google Maps scripts. Please try again later.'\n                  }\n                />\n              }\n              googleMapURL={`https://maps.googleapis.com/maps/api/js?key=${MAP_API_KEY}&v=3`}\n            />\n          )}\n          {mapError && (\n            <Error\n              size=\"small\"\n              message={\n                'There was an error while loading the Google Maps scripts. Please try again later.'\n              }\n            />\n          )}\n          {loaded && (\n            <Filter\n              data={this.state}\n              onToggleOpen={this.onToggleOpen}\n              filterPlaces={this.filterPlaces}\n            />\n          )}\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}